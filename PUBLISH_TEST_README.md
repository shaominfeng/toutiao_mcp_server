# 今日头条自动发布功能测试指南

## 🚀 快速开始

### 1. 环境准备
确保您已经：
- 激活了 mcpo 虚拟环境
- 安装了所有依赖（selenium等）
- ChromeDriver 已正确配置

### 2. 登录状态
确保您已经登录今日头条：
- 运行过登录脚本
- Cookie 状态正常

### 3. 运行测试

#### 方法一：一键测试（推荐）
```bash
python run_publish_test.py
```

#### 方法二：直接运行简化测试
```bash
python test_simple_publish_final.py
```

#### 方法三：运行完整测试
```bash
python test_optimized_publish.py
```

## 📋 测试内容

### 标题输入测试
- 自动处理遮罩层
- 多种方式设置标题
- 触发必要事件确保保存

### 正文内容测试
- HTML格式内容插入
- 段落格式化
- 编辑器事件触发

### 发布流程测试
- 多策略按钮定位
- JavaScript点击避免遮挡
- 完整发布确认流程

## 🔧 故障排除

### 常见问题
1. **浏览器无法打开**
   - 检查 ChromeDriver 路径
   - 确认 Chrome 浏览器已安装

2. **登录状态失效**
   - 重新运行登录脚本
   - 检查 Cookie 文件

3. **元素定位失败**
   - 页面结构可能发生变化
   - 查看日志文件了解详情

### 日志文件
- `publish_test_final.log` - 简化测试日志
- `test_optimized_publish.log` - 完整测试日志

## ✨ 功能特点

- **智能遮罩层处理**: 自动检测并关闭干扰的遮罩层
- **多策略元素定位**: 使用多种方法定位页面元素
- **稳定内容输入**: JavaScript直接操作，避免输入法问题
- **完整发布流程**: 从标题输入到确认发布的完整自动化

## 📞 技术支持

如果遇到问题，请：
1. 查看相应的日志文件
2. 确认环境配置正确
3. 检查网络连接状态